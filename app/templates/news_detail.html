{% extends 'base/base.html' %}

{% block title %}{{ news.title }}{% endblock %}

{% block content %}
<!-- –°–µ—Ä–∞—è –ø–æ–ª–æ—Å–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –Ω–æ–≤–æ—Å—Ç–∏ -->
<div class="bg-dark text-white text-center">
  {% if news.image %}
  <div class="container">
    <img src="{{ news.image.url }}" class="img-fluid" alt="{{ news.title }}">
  </div>
  {% endif %}
</div>

<div class="container my-5">
  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏ -->
  <h1 class="mb-3">{{ news.title }}</h1>

  <!-- –¢–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏ -->
  <div class="mb-4">
    <p>{{ news.description | linebreaks }}</p>
  </div>

  <!-- –õ–∞–π–∫–∏ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <!-- –°–µ–∫—Ü–∏—è –ª–∞–π–∫–æ–≤ -->
    <div class="d-flex align-items-center">
      <span class="me-2"><strong>–õ–∞–π–∫–∏:</strong> {{ news.like_count }}</span>
      {% if user.is_authenticated %}
      <form method="post" class="d-inline-block">
        {% csrf_token %}
        {% if liked_by_user %}
        <button type="submit" name="like" class="btn btn-link p-0"
          style="font-size: 24px;text-decoration: none; font-weight: inherit;">üëé</button>
        {% else %}
        <button type="submit" name="like" class="btn btn-link p-0"
          style="font-size: 24px;text-decoration: none; font-weight: inherit;">üëç</button>
        {% endif %}
      </form>
      {% else %}
      <a href="{% url 'login' %}" style="text-decoration: none; font-weight: inherit;"><small>(–≤–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã
          –ø–æ—Å—Ç–∞–≤–∏—Ç—å –ª–∞–π–∫)</small></a>
      {% endif %}
    </div>
    <!-- –°–µ–∫—Ü–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ -->
    <div>
      <span><strong>–ü—Ä–æ—Å–º–æ—Ç—Ä—ã:</strong> {{ news.views }}</span>
    </div>
  </div>

  <!-- –°–µ–∫—Ü–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ -->
  <h3 class="mb-3">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h3>

  <!-- –°–ø–∏—Å–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ -->
  <div class="mb-4">
    {% if comments %}
    {% for comment in comments %}
    <div class="card mb-3">
      <div class="card-body">
        <p class="card-text">{{ comment.text }}</p>
        <p class="text-muted">- {{ comment.author.full_name }}, {{ comment.created_at }}</p>
      </div>
    </div>
    {% endfor %}
    {% else %}
    <p>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!</p>
    {% endif %}
  </div>

  <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è -->
  {% if user.is_authenticated %}
  <h4 class="mb-3">–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</h4>
  <form method="post">
    {% csrf_token %}
    <div class="mb-3">
      <textarea name="text" class="form-control" rows="3" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."></textarea>
    </div>
    <button type="submit" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</button>
  </form>
  {% else %}
  <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, <a href="{% url 'login' %}">–≤–æ–π–¥–∏—Ç–µ</a>, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π.</p>
  {% endif %}
</div>
{% endblock %}